<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>QuotesÂ AudioÂ AppÂ +Â GamificaciÃ³n</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fuentes y utilidades -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Tus estilos externos (token system + mediaâ€‘queries) -->
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* ----------  mÃ­nimos ajustes rÃ¡pidos  ---------- */
    body{font-family:'Inter',sans-serif;margin:0;background:#0d0d0d;color:#f5f5f5}
    img{max-width:100%;display:block}
    h1,h2{margin:.5rem 0}
    button{cursor:pointer}
    .app-container{max-width:960px;margin:auto;padding:1.5rem;display:flex;flex-direction:column;gap:2.5rem}
    .section-title{font-size:1.2rem;font-weight:600;margin:1rem 0}
    /* sobrescribe tamaÃ±o canvas en mÃ³vil */
    @media(max-width:640px){#gameCanvas{width:160px;height:160px}}
  </style>
</head>

<body class="bg-misty">

<!-- Selector de idioma -->
<nav class="lang-switcher">
  <button data-lang="es" class="active">ES</button>
  <button data-lang="en">EN</button>
  <button data-lang="it">IT</button>
</nav>

<!-- Tarjeta de Poema -->
<section class="poem-card">
  <h2 class="poem-title" id="poem-title"></h2>
  <p  class="poem-text"  id="poem-text"></p>
  <button class="next-btn" id="next-btn">Next</button>
</section>

<div class="app-container">

  <!-- Cabecera principal -->
  <header class="app-header">
    <h1 class="app-title">QuotesÂ AudioÂ App</h1>
    <span class="quote-counter"><span id="currentQuote">1</span>/<span id="totalQuotes">3</span></span>
  </header>

  <!-- QUOTE + PROGRESO -->
  <main class="main-content">
    <div class="quote-container">
      <h2 id="quoteTitle" class="quote-title">TÃ­tulo de la cita</h2>
      <div class="reading-progress">
        <progress id="progressBar" value="0" max="100"></progress>
      </div>
      <div id="quoteDisplay" class="quote-display">AquÃ­ aparecerÃ¡ el texto sincronizadoâ€¦</div>
    </div>

    <!-- CONTROLES AUDIO -->
    <div class="controls-panel">
      <div class="audio-controls">
        <button id="prevBtn"  class="control-btn secondary" aria-label="Anterior"><i data-feather="skip-back"></i></button>
        <button id="playPauseBtn" class="control-btn primary"   aria-label="Play/Pause"><i data-feather="play"></i></button>
        <button id="stopBtn"      class="control-btn secondary" aria-label="Stop"><i data-feather="square"></i></button>
        <button id="nextBtn"      class="control-btn secondary" aria-label="Siguiente"><i data-feather="skip-forward"></i></button>
      </div>
    </div>

    <!-- AJUSTES -->
    <div class="settings-panel">
      <div class="setting-group">
        <label class="setting-label" for="audioFile">Audio local</label>
        <input type="file" id="audioFile" accept="audio/*" class="file-input" />
      </div>
      <div class="setting-group">
        <label class="setting-label" for="highlightColor">Color</label>
        <input type="color" id="highlightColor" value="#6366f1" class="color-picker" />
      </div>
      <div class="setting-group">
        <label class="setting-label" for="speechRate">Velocidad</label>
        <div class="slider-wrapper">
          <input type="range" id="speechRate" min="0.6" max="2" step="0.1" value="1" class="speed-slider" />
          <span id="speedValue">1.0Ã—</span>
        </div>
      </div>
    </div>

    <!-- RANKING & GAMIFICACIÃ“N -->
    <section class="ranking-section">
      <h2 class="section-title">ğŸ†Â TopÂ EstudiantesÂ â€“Â Semana</h2>
      <div class="ranking">
        <!-- Estudiante 1 -->
        <div class="student">
          <img src="https://em-content.zobj.net/thumbs/120/google/350/1st-place-medal_1f947.png" alt="Oro" class="medal" />
          <div class="info">
            <h3>ğŸ¥‡Â ValeriaÂ RÃ­os</h3>
            <p>ğŸ¯Â 980â€¯pts Â· ğŸ”¥Â Maestra del Razonamiento</p>
          </div>
        </div>
        <!-- Estudiante 2 -->
        <div class="student">
          <img src="https://em-content.zobj.net/thumbs/120/google/350/2nd-place-medal_1f948.png" alt="Plata" class="medal" />
          <div class="info">
            <h3>ğŸ¥ˆÂ AndrÃ©sÂ LeÃ³n</h3>
            <p>ğŸ¯Â 910â€¯pts Â· ğŸ“˜Â AnalistaÂ Avanzado</p>
          </div>
        </div>
        <!-- Estudiante 3 -->
        <div class="student">
          <img src="https://em-content.zobj.net/thumbs/120/google/350/3rd-place-medal_1f949.png" alt="Bronce" class="medal" />
          <div class="info">
            <h3>ğŸ¥‰Â FiorellaÂ MartÃ­nez</h3>
            <p>ğŸ¯Â 880â€¯pts Â· ğŸÂ Sticker digital</p>
          </div>
        </div>
      </div>

      <!-- Simulador de cambios de estado -->
      <div class="phase-sim">
        <h3 class="section-title">âš›ï¸Â Simulador de Cambios de Estado</h3>
        <label for="estado">Estado actual:</label>
        <select id="estado">
          <option value="sÃ³lido">SÃ³lido</option>
          <option value="lÃ­quido">LÃ­quido</option>
          <option value="gas">Gas</option>
        </select>
        <label for="temperatura">TemperaturaÂ (Â°C):</label>
        <input type="number" id="temperatura" value="25" />
        <button onclick="simularCambio()">Simular</button>
        <p id="resultado"></p>
      </div>

      <!-- Miniâ€‘juego -->
      <div class="mini-game">
        <h3 class="section-title">ğŸ®Â Juego: ClickÂ RÃ¡pido</h3>
        <p>Haz clic lo mÃ¡s rÃ¡pido posible en 5â€¯segundos.</p>
        <button onclick="startGame()">Iniciar juego</button>
        <p id="gameScore"></p>
        <canvas id="gameCanvas" width="200" height="200"></canvas>
      </div>
    </section>
  </main>
</div>

<audio id="audioPlayer" hidden></audio>
<div id="errorMessage" class="error-message" role="alert" aria-live="polite"></div>

<!-- ==========  SCRIPTS  ========== -->
<script>
/* ----------  POEMA + FONDOS  ---------- */
const poems=[
  {bg:'https://images.unsplash.com/photo-1506459225024-1428097a7e18?auto=format&fit=crop&w=1600&q=80',
   title:{es:'Diez muchachas',en:'TenÂ girls',it:'DieciÂ ragazze'},
   text:{es:'En Viena hay diez muchachas, un hombro donde solloza la muerteâ€¦',
         en:'In Vienna there are ten girls, a shoulder where death sobsâ€¦',
         it:'A Vienna ci sono dieci ragazze, una spalla dove singhiozza la morteâ€¦'}},
  {bg:'https://images.unsplash.com/photo-1602524819641-3c89723a87bd?auto=format&fit=crop&w=1600&q=80',
   title:{es:'Boca cerrada',en:'Mouth closed',it:'Bocca chiusa'},
   text:{es:'Toma este vals con la boca cerrada.',
         en:'Take this waltz with your mouth closed.',
         it:'Prendi questo valzer con la bocca chiusa.'}},
  {bg:'https://images.unsplash.com/photo-1554106273-9e9d22b1a1fc?auto=format&fit=crop&w=1600&q=80',
   title:{es:'Ãtico',en:'Attic',it:'Soffitta'},
   text:{es:'Verso del Ã¡ticoâ€¦',en:'Attic verseâ€¦',it:'Verso della soffittaâ€¦'}},
  {bg:'https://images.unsplash.com/photo-1519608487953-e999c86e7455?auto=format&fit=crop&w=1600&q=80',
   title:{es:'Tren',en:'Train',it:'Treno'},
   text:{es:'Verso del trenâ€¦',en:'Train verseâ€¦',it:'Verso del trenoâ€¦'}}
];
let idx=0,lang='es';
const titleEl=document.getElementById('poem-title');
const textEl =document.getElementById('poem-text');
const nextBtn=document.getElementById('next-btn');
const langBtns=document.querySelectorAll('.lang-switcher button');
function renderPoem(){
  const {title,text,bg}=poems[idx];
  titleEl.textContent=title[lang];
  textEl.textContent =text[lang];
  document.body.style.backgroundImage=`url('${bg}')`;
}
nextBtn.addEventListener('click',()=>{idx=(idx+1)%poems.length;renderPoem()});
langBtns.forEach(b=>b.addEventListener('click',e=>{
  lang=e.target.dataset.lang;
  langBtns.forEach(btn=>btn.classList.toggle('active',btn===e.target));
  renderPoem();
}));
renderPoem();

/* ----------  SIMULADOR FASES  ---------- */
function simularCambio(){
  const estado=document.getElementById('estado').value;
  const temp=parseFloat(document.getElementById('temperatura').value);
  let nuevo=estado;
  if(estado==='sÃ³lido'){ if(temp>=0&&temp<100)nuevo='lÃ­quido'; else if(temp>=100)nuevo='gas'; }
  else if(estado==='lÃ­quido'){ if(temp<0)nuevo='sÃ³lido'; else if(temp>=100)nuevo='gas'; }
  else if(estado==='gas'){ if(temp<100&&temp>=0)nuevo='lÃ­quido'; else if(temp<0)nuevo='sÃ³lido'; }
  document.getElementById('resultado').textContent=`Nuevo estado: ${nuevo}`;
}

/* ----------  MINI GAME  ---------- */
let clickCount=0,timer;
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
function drawCircle(){
  ctx.fillStyle='#39FF14';
  ctx.beginPath();ctx.arc(100,100,30,0,Math.PI*2);ctx.fill();
}
function countClick(e){
  const {left,top}=canvas.getBoundingClientRect();
  const dx=e.clientX-left-100,dy=e.clientY-top-100;
  if(Math.hypot(dx,dy)<=30){clickCount++;drawCircle();}
}
function startGame(){
  clickCount=0;
  document.getElementById('gameScore').textContent='Â¡Haz clic en el cÃ­rculo!';
  ctx.clearRect(0,0,200,200);
  drawCircle();
  canvas.addEventListener('click',countClick);
  clearTimeout(timer);
  timer=setTimeout(()=>{
    canvas.removeEventListener('click',countClick);
    ctx.clearRect(0,0,200,200);
    document.getElementById('gameScore').textContent=`Puntaje final: ${clickCount}`;
  },5000);
}

/* ----------  Feather Icons  ---------- */
feather.replace();
</script>
</body>
</html>
